/* Fonts */
@font-face { font-family: "IBM Plex Serif"; src: url("fonts/IBMPlexSerif-Regular.woff2") format("woff2"); font-weight: 400; font-display: swap; }
@font-face { font-family: "IBM Plex Serif"; src: url("fonts/IBMPlexSerif-Italic.woff2") format("woff2"); font-style: italic; font-weight: 400; font-display: swap; }
@font-face { font-family: "IBM Plex Serif"; src: url("fonts/IBMPlexSerif-SemiBold.woff2") format("woff2"); font-weight: 600; font-display: swap; }
@font-face { font-family: "IBM Plex Sans"; src: url("fonts/IBMPlexSans-Regular.woff2") format("woff2"); font-weight: 400; font-display: swap; }
@font-face { font-family: "IBM Plex Sans"; src: url("fonts/IBMPlexSans-SemiBold.woff2") format("woff2"); font-weight: 600; font-display: swap; }
@font-face { font-family: "IBM Plex Mono"; src: url("fonts/IBMPlexMono-Regular.woff2") format("woff2"); font-weight: 400; font-display: swap; }

/* =============================================================================
   COMPONENTS — Reusable UI primitives
   ============================================================================= */

/* Pill Button — rounded button used for toggles */
.pill-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.35em;
  background: var(--surface);
  border: 1px solid var(--line);
  border-radius: var(--radius-full);
  color: var(--text);
  cursor: pointer;
  font: 400 var(--step--1)/1 var(--font-serif);
  padding: 0.5rem 1rem;
  white-space: nowrap;
  box-shadow: 0 2px 8px var(--shadow-sm);
}
.pill-btn:hover { border-color: var(--line-strong); }
.pill-btn--icon { padding: 0.35rem 0.5rem; background: transparent; box-shadow: none; }
.pill-btn--icon svg { width: 16px; height: 16px; }
.pill-btn--close { font-size: 1.25rem; min-width: 40px; min-height: 40px; padding: 0; background: transparent; box-shadow: none; }
.pill-btn--caret::after { content: "▾"; font-size: 0.65em; opacity: 0.4; }

/* Dropdown — floating panel for menus */
.dropdown {
  display: none;
  position: absolute;
  top: calc(100% + 6px);
  left: 50%;
  transform: translateX(-50%);
  background: var(--surface-elevated);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: 0 4px 20px var(--shadow);
  max-height: 60vh;
  min-width: 220px;
  max-width: 300px;
  overflow-y: auto;
  padding: 0.5rem 0;
  z-index: 25;
}
.dropdown.is-open { display: block; }

/* Menu Link — nav/toc list items */
.menu-list { list-style: none; margin: 0; padding: 0; }
.menu-list li { margin: 0; }
.menu-link {
  display: block;
  padding: var(--space-1) var(--space-2);
  border-left: 2px solid transparent;
  color: var(--muted);
  font: 400 var(--step--1)/1.4 var(--font-serif);
  text-decoration: none;
}
.menu-link:hover { color: var(--text-strong); background: var(--accent-soft); }
.menu-link.is-active { color: var(--accent); border-left-color: var(--accent); font-weight: 600; }
.menu-link--indent { padding-left: calc(var(--space-2) * 2); }

/* Input — form controls */
.input {
  background: transparent;
  border: 1px solid var(--line);
  border-radius: var(--radius-full);
  color: var(--text);
  font: 400 var(--step--1)/1 var(--font-sans);
  padding: 0.35rem 0.75rem;
  width: 100%;
}
.input:focus { border-color: var(--line-strong); outline: none; }
.input::placeholder { color: var(--muted); }

/* =============================================================================
   LAYOUT
   ============================================================================= */

.site-header {
  position: fixed;
  inset: 0 0 auto;
  z-index: 20;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-1) var(--space-2);
  background: var(--bg);
  border-bottom: 1px solid var(--line);
}

.nav-pills { display: flex; align-items: center; gap: var(--space-1); }
.pill-wrap { position: relative; }
.header-search { display: flex; align-items: center; }

.site-shell { margin: 0 auto; max-width: 50rem; padding: 3.5rem var(--space-2) 0; }
.doc-panel { background: var(--surface); padding: var(--space-4) var(--space-3); }

/* Breadcrumb */
.breadcrumb { display: flex; align-items: center; gap: 0.5rem; font-size: var(--step--1); color: var(--muted); min-width: 0; }
.breadcrumb-home { font-family: var(--font-mono); text-decoration: none; color: var(--muted); letter-spacing: -0.1em; flex-shrink: 0; }
.breadcrumb-home:hover { color: var(--accent); }
.breadcrumb-sep { color: var(--line-strong); flex-shrink: 0; }
.breadcrumb-current { font-family: var(--font-serif); color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Search */
.search-wrap { max-width: 8rem; position: relative; width: 100%; }
.search-results { position: absolute; top: calc(100% + 0.5rem); width: 100%; max-height: 18rem; }
.search-results a, .search-results .search-empty { display: block; padding: var(--space-1); color: var(--text); text-decoration: none; }
.search-results a:hover { background: var(--accent-soft); outline: none; }
.result-title { display: block; color: var(--text-strong); font: 600 var(--step--1)/1.4 var(--font-serif); }
.result-snippet { display: block; color: var(--muted); font-size: var(--step--1); line-height: 1.4; }

/* =============================================================================
   PROSE — Content typography
   ============================================================================= */

.prose { margin: 0 auto; max-width: var(--measure); }
.prose > * { margin: 0; }
.prose > * + * { margin-top: var(--baseline); }

/* Headings */
.prose :is(h1, h2, h3, h4) { color: var(--accent); font: 400 var(--step-1)/1.2 var(--font-serif); scroll-margin-top: 6rem; }
.prose h1 { font-size: var(--step-2); margin-bottom: var(--baseline); }
.prose h2 { margin-top: var(--space-6); }
.prose h3 { font-size: var(--step-0); font-weight: 600; margin-top: var(--space-4); }
.prose h4 { font-size: var(--step-0); }
.prose h1 + p { color: var(--muted); margin-top: 0; }

/* Body */
.prose :is(p, li, td, th) { font-size: var(--step-0); line-height: 1.2; max-width: var(--measure); }
.prose a:not(.anchor-link) { color: var(--accent); }
.prose a:not(.anchor-link):hover { text-decoration-thickness: 2px; }
.prose :is(ul, ol) { padding-left: var(--space-3); }
.prose li { margin: 0; }

/* Anchor links */
.anchor-link { color: inherit; text-decoration: none; }
.prose :is(h1, h2, h3, h4):hover .anchor-link { text-decoration: underline; text-decoration-color: var(--line-strong); }

/* Code */
.prose pre { background: var(--surface-elevated); border: 1px solid var(--line); color: var(--text-strong); font-size: var(--step--1); line-height: 1.4; overflow: auto; padding: var(--space-2); }
.prose :is(code, kbd, samp) { font-family: var(--font-mono); font-size: 0.85em; }
.prose :not(pre) > code { background: var(--surface-elevated); border: 1px solid var(--line); padding: 0.1em 0.35em; }

/* Tables */
.prose table { border-collapse: collapse; font-size: var(--step--1); margin-top: var(--baseline); width: 100%; }
.prose :is(th, td) { border-bottom: 1px solid var(--line); padding: var(--space-1); text-align: left; vertical-align: baseline; }
.prose th { font-family: var(--font-sans); font-weight: 600; }

/* Media */
.prose :is(figure, .media-figure, picture, video, img) { margin-top: var(--space-4); width: 100%; }
.prose :is(picture, video, img) { display: block; }
.prose figcaption { color: var(--muted); font-size: var(--step--1); line-height: 1.2; margin-top: var(--space-1); }

/* Blockquote */
.prose blockquote { border-left: 2px solid var(--accent); margin-left: 0; padding-left: var(--space-2); }
.prose blockquote p { margin: 0; }
.prose blockquote p + p { margin-top: var(--baseline); }

/* HR */
.prose hr { border: 0; border-top: 1px solid var(--line); margin-top: var(--space-4); }

/* Footnotes */
.prose .footnote-ref a { color: var(--accent); font: 600 0.75em var(--font-sans); text-decoration: none; vertical-align: super; }
.prose .footnotes { border-top: 1px solid var(--line); font-size: var(--step--1); margin-top: var(--space-6); padding-top: var(--space-2); }
.prose .footnotes h2 { font-size: var(--step-0); margin: 0; }
.prose .footnotes ol { margin: var(--baseline) 0 0; padding-left: var(--space-3); }
.prose .footnotes li + li { margin-top: var(--baseline); }
.prose .footnotes p { margin: 0; }
.prose .footnote-backrefs { margin-top: var(--space-1); }
.prose .footnote-backref { color: var(--muted); font: 0.85em var(--font-sans); margin-right: var(--space-1); text-decoration: none; }

/* Footer */
.doc-footer { border-top: 1px solid var(--line); color: var(--muted); font: var(--step--1)/1.2 var(--font-sans); margin-top: var(--space-6); padding-top: var(--space-2); }

/* =============================================================================
   RESPONSIVE
   ============================================================================= */

@media (max-width: 48rem) {
  .site-header { gap: var(--space-1); padding: 0.5rem var(--space-1); }
  .breadcrumb { display: none; }
  .header-search .search-wrap { display: none; }
  .search-toggle { display: inline-flex; }

  .search-wrap.is-expanded {
    display: flex;
    position: fixed;
    inset: 0 0 auto;
    background: var(--surface);
    border-bottom: 1px solid var(--line);
    padding: var(--space-2);
    z-index: 30;
    gap: var(--space-1);
    max-width: none;
  }
  .search-wrap.is-expanded .input { flex: 1; }
  .search-wrap.is-expanded .search-close { display: flex; }
  .search-wrap.is-expanded .search-results { position: absolute; top: 100%; left: 0; right: 0; border-radius: 0; }

  .site-shell { padding-top: 3rem; }
  .pill-btn { padding: 0.4rem 0.75rem; font-size: 0.8rem; max-width: 140px; overflow: hidden; text-overflow: ellipsis; }
  .menu-link { min-height: 44px; display: flex; align-items: center; }
  .doc-panel { padding: var(--space-3) var(--space-2); }
}

@media (min-width: 48.01rem) {
  .search-toggle, .search-close { display: none; }
}
